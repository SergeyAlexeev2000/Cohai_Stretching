# План для фронтенда (plan_frontend_refactor.md)

Цель: превратить текущий Vite+React проект в полноценный сайт Cohai Stretching, основанный на мастер‑плане и на нашем backend API.

## 1. Текущая база

1.1. Уже есть:
- Vite + React.
- TailwindCSS.
- Базовый `App.jsx` с запросами к backend:
  - загрузка locations;
  - загрузка memberships;
  - загрузка schedule.
- Компоненты:
  - `LeadForm`,
  - `LocationSelect`,
  - `MembershipList`,
  - `ScheduleList`.

1.2. Ограничения:
- Пока нет роутинга (всё в одной странице).
- Нет нормальной структуры страниц и навигации.
- Мало стилизации и адаптивности под мобильные устройства.

---

## 2. Архитектура фронтенда

2.1. Библиотека маршрутизации
- Использовать `react-router-dom`.
- Маршруты:
  - `/` — Главная.
  - `/newbie` — Памятка новичку.
  - `/formats` — Форматы и направления.
  - `/schedule` — Расписание.
  - `/prices` — Цены.
  - `/trainers` — Тренеры и вакансии.
  - `/contacts` — О студии и контакты.
  - (опционально) `/cases`, `/testimonials`.

2.2. Структура файлов
- `src/`
  - `api.js` — обёртка над fetch/axios для API backend.
  - `components/`
    - общие компоненты (`Header`, `Footer`, `Layout`, `Button`, `Section`).
    - доменные (`LeadForm`, `LocationSelect`, `MembershipList`, `ScheduleList`).
  - `pages/`
    - `HomePage.jsx`
    - `NewbieGuidePage.jsx`
    - `FormatsPage.jsx`
    - `SchedulePage.jsx`
    - `PricesPage.jsx`
    - `TrainersPage.jsx`
    - `ContactsPage.jsx`
  - `styles/` (если будут доп. CSS).

---

## 3. Интеграция с backend API

3.1. `api.js`
- Функции:
  - `getLocations()` → `GET /public/locations`.
  - `getProgramTypes()` → `GET /public/program-types`.
  - `getMemberships(params)` → `GET /public/memberships`.
  - `getSchedule(params)` → `GET /public/schedule`.
  - `createLead(payload)` → `POST /public/leads`.

3.2. Обработка ошибок
- Глобальный `error boundary` или простой `toast`/alert.
- Логирование ошибок в консоль, аккуратные сообщения пользователю.

3.3. Настройка переменных окружения
- `VITE_API_BASE_URL` для dev/prod.

---

## 4. Реализация страниц

### 4.1. `HomePage`

4.1.1. Герой‑блок
- Лого, слоган, CTA‑кнопки («Запись на пробное», «Скачать приложение»).

4.1.2. Блок «Как начать»
- 4 шага из памятки новичку, кратко.
- Кнопка «Подробнее» → `/newbie`.

4.1.3. Превью форматов
- Несколько карточек (активный, классический, female styles, персоналки).
- Кнопка «Все форматы» → `/formats`.

4.1.4. Превью расписания
- Виджет на ближайшие 2–3 дня (через `getSchedule`).
- Кнопка «Полное расписание» → `/schedule`.

4.1.5. Превью цен
- 2–3 главных пакета (например, 4/8/12 занятий).
- Кнопка «Все цены» → `/prices`.

4.1.6. Превью отзывов
- Слайдер из 3 отзывов.

4.1.7. Футер
- Контакты, карта (мини), ссылки на соцсети.

---

### 4.2. `NewbieGuidePage`

- Подробная реализация 4 шагов («Памятка новичку»).
- Вставка FAQ.
- Большая форма «Записаться на пробное» (использует `LeadForm`).

---

### 4.3. `FormatsPage`

- Секция «Групповые тренировки» (карточки).
- Секция «Персональные / Duo / Trio».
- Секция «Парковые тренировки».
- Секция «Спецкейсы» (с ссылкой на `/cases`, если будет).

---

### 4.4. `SchedulePage`

- Фильтры:
  - Локация (из `getLocations()`).
  - Направление (из `getProgramTypes()`).
  - Дата (сегодня/завтра/неделя).
- Таблица / карточки занятий.
- Кнопка «Записаться» возле каждого занятия → `LeadForm` с автозаполнением выбранного формата и времени.

---

### 4.5. `PricesPage`

- Отрисовывать данные `memberships` по категориям:
  - групповые;
  - персональные;
  - парки;
  - пробные/гостевые.
- Секция с пояснениями: условия заморозки, пробного, списания при неявке.

---

### 4.6. `TrainersPage`

- Секция «Наши тренеры».
- Секция «Стать тренером» с описанием требований.
- Форма «Откликнуться» (пока можно сделать как обычный `mailto:`+ заявка через `Lead` с типом `trainer_application`).

---

### 4.7. `ContactsPage`

- Карта Google Maps с текущей локацией.
- Адрес, телефон, ссылки на соцсети.
- Часы работы.
- Кнопка «Построить маршрут в Google Maps/Яндекс».

---

## 5. UI/UX детали

5.1. Адаптивность
- Мобильный вид — приоритет (как у приложения).
- Проверить, что все страницы читаемы на 360px ширины.

5.2. Цветовая палитра
- Взять цвета и шрифты из приложения и инсты:
  - тёмный фон,
  - яркие акценты (синий, салатовый/лаймовый),
  - аккуратный шрифт для заголовков и текста.

5.3. Локализация RU/RO
- Пока можно сделать переключатель, который меняет текст на странице.
- Структурно:
  - либо через простой объект `translations`,
  - либо через библиотеку i18next (на будущее).

---

## 6. Технический долг и улучшения

6.1. Разделить компоненты по ответственности
- Презентационные компоненты (только верстка).
- Контейнеры (получают данные из API и пробрасывают вниз).

6.2. Добавить базовое состояние загрузки/ошибок
- Спиннеры, skeleton‑карточки.

6.3. Настроить ESLint и Prettier
- Уже есть базовый конфиг Vite — довести до ума.

6.4. Написать пару юнит‑тестов
- Например, на `LeadForm` (валидация) и `ScheduleList` (правильный рендер).

---

## 7. Этапность работ по фронтенду

### Этап 1 — Мини‑лендинг на текущем коде
- На базе текущего `App.jsx` сделать простую главную с:
  - блоком о студии,
  - простым расписанием,
  - базовым прайсом,
  - формой лида.

### Этап 2 — Введение роутинга и страниц
- Подключить `react-router-dom`.
- Разбить на `HomePage`, `SchedulePage`, `PricesPage`, `ContactsPage`.
- Перераспределить существующие компоненты.

### Этап 3 — Полная реализация мастер‑плана
- Добавить страницы «Памятка новичку», «Форматы», «Тренеры», «Отзывы», «Кейсы».
- Доработать дизайн и локализацию.
- Плотно связать все страницы с обновлённым backend’ом.
